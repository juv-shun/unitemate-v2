# DB 設計

## テーブル一覧

| テーブル名  | 説明             |
| ----------- | ---------------- |
| users       | ユーザー情報     |
| match_queue | マッチングキュー |
| matches     | マッチング情報   |

## テーブル設計

### users

| 項目名            | 型     | 説明                         |
| ----------------- | ------ | ---------------------------- |
| user_id           | string | ユーザー ID                  |
| discord_id        | string | Discord ID                   |
| twitter_id        | string | Twitter ID                   |
| desired_roles     | list   | 希望ロール                   |
| description       | string | 自己紹介文                   |
| preferred_pokemon | list   | 得意ポケモン                 |
| badges            | list   | 勲章                         |
| rate              | number | レート                       |
| max_rate          | number | 最大レート                   |
| match_count       | number | 試合回数                     |
| win_count         | number | 勝ち数                       |
| penalty_count     | number | ペナルティ数                 |
| match_history     | list   | 試合履歴                     |
| last_match_at     | number | 最後の試合日時               |
| inqueue_status    | string | マッチングキューに対する状態 |
| inqueued_at       | number | キューに追加された日時       |

### matches

| 項目名       | 型     | 説明                                                                       |
| ------------ | ------ | -------------------------------------------------------------------------- |
| match_id     | string | マッチング ID                                                              |
| matched_at   | number | マッチング日時                                                             |
| status       | string | マッチング状態                                                             |
| winner       | string | 勝利チーム                                                                 |
| users        | map    | ユーザー情報                                                               |
| user_reports | list   | ユーザーからの試合報告(users に含まれるユーザー 10 人分から報告されるはず) |

#### matches/users

| 項目名 | 型   | 説明                          |
| ------ | ---- | ----------------------------- |
| teamA  | list | チーム A のユーザー情報(5 人) |
| teamB  | list | チーム B のユーザー情報(5 人) |

#### matches/users/teamA (teamB)

| 項目名  | 型     | 説明        |
| ------- | ------ | ----------- |
| user_id | string | ユーザー ID |
| rate    | number | レート      |

#### matches/user_reports

| 項目名  | 型     | 説明                    |
| ------- | ------ | ----------------------- |
| user_id | string | ユーザー ID             |
| team    | string | チーム (teamA or teamB) |
| result  | string | 勝敗                    |
| pokemon | string | 使用ポケモン            |
