# 画面定義書: ランキングページ

## 概要
- 公開ページ。上位プレイヤーをレート降順で一覧表示する。
- 認証不要。未ログインでも閲覧可能。

## レイアウト/コンポーネント
- ヘッダー: 共通ヘッダー（トップ/マッチング/ランキング）
- 本文: 見出し「ランキング」、説明テキスト、ランキング表

## ランキング表（PC基準）
- 列構成（左→右）
  - 順位: `rank`
  - プレイヤー: アバター画像 + トレーナー名（注: app_usernameやDiscord名は表示しない）
    - 右側にTwitterリンク（後述）
  - レート: `rate`
  - 最高: `max_rate`
  - 試合: `match_count`
  - 勝利: `win_count`
  - 勝率: `win_count / match_count` をパーセント小数1桁で表示（例: 57.1%）
  - 最終試合: `last_match_at` を相対表示（〜分前/〜時間前/〜日前）または `YYYY-MM-DD`
- モバイル: 横スクロール可。将来的にカード表示へ最適化してもよい。

## プレイヤー名の方針
- 表示する名前は「トレーナー名」のみ。
- `app_username` や Discord ユーザー名は表示しない。

## Twitterリンク（Xリンク）
- 目的: プレイヤーのTwitter(X)プロフィールへの導線を提供。
- 表示位置: プレイヤー列（トレーナー名の右側）にアイコンボタンを表示。
- 表示条件: `twitter_id` が存在する場合のみ表示。
- リンク先: `https://x.com/{twitter_id_without_at}`
  - `@` は取り除いて連結する（例: `@my_id` → `https://x.com/my_id`）。
- 動作:
  - 新規タブで開く（`target="_blank"`、`rel="noopener noreferrer"`）。
  - ホバー時に軽い強調（色/シャドウ）を付与。
- アクセシビリティ:
  - `aria-label`: `Xで{trainer_name}を開く (@{twitter_id})`
  - アイコンには代替テキストではなくボタン全体にラベル付与。
- フォールバック: `twitter_id` が無い場合はアイコンを表示しない。

## データ入出力要件（フロント視点）
- 取得API: `GET /api/rankings?limit={1..200}`
- 必要フィールド:
  - 必須: `rank`, `user_id`, `trainer_name`, `rate`
  - 任意: `max_rate`, `match_count`, `win_count`, `last_match_at`, `discord_avatar_url`, `twitter_id`
- 備考: 既存のAPI仕様に `twitter_id` が含まれない場合、ランキング用レスポンスに `twitter_id` を追加するか、あるいは各行描画に不要とする場合はリンクを非表示とする（本仕様では表示推奨）。

## エラーハンドリング/ローディング
- ローディング: 「読み込み中…」表示。
- エラー: 取得失敗時はメッセージ表示（再試行UIは任意）。

## デザイン/スタイル（参考）
- アバター: 円形、`32–40px` 程度。
- トレーナー名: 太字。
- Twitterアイコン: 16–18px、ブランドカラーまたは中間色。ホバーで色/スケール微強調。

