# 通報機能の要件

## 目的
- ゲームに参加してこなかったユーザーを通報し、一定人数の通報が集まった場合に対象ユーザーへキュー参加制限を与える。
- ペナルティ付与時点で進行中の試合は継続可能とし、試合の強制終了は行わない。

## 用語
- **通報**: マッチ内の参加者が、別の参加者の不参加を報告する行為。
- **対象ユーザー**: 通報されたユーザー。
- **通報者**: 通報を行ったユーザー。
- **同一マッチ**: 同一の matchId に紐づく試合。
- **インキュー**: マッチング待機キューへの参加。
- **ペナルティ**: 一定時間のインキュー不可状態を付与する制裁。

## 想定ユースケース
- 試合開始後に、ゲームへ参加してこなかったユーザーXがいる。
- ゲーム内で参加状況は10人全員が把握できる。
- 同一マッチ内の参加者のうち、**誰でもよいので3名**がユーザーXを通報する。
- 通報者がそれぞれ異なるユーザーであることが確認される。
- ユーザーXに「60分のインキュー不可」ペナルティを付与する。
- 付与時点で対象ユーザーXが試合中であっても、その試合は継続できる。

## 機能要件

### 通報の条件
- 同一マッチ内で、**別々のユーザーからの通報が3件**集まった場合にペナルティを付与する。
- 通報者が同一人物の場合はカウントしない。
- 通報対象ユーザーは通報者と同一マッチに参加している必要がある。
- チーム（味方/敵）は問わない。

### ペナルティの内容
- ペナルティは「ペナルティ確定日時から60分のインキュー不可」とする。
- ペナルティ付与時点で試合中であれば、その試合は継続できる。
- ペナルティ中は新規のインキューを禁止する。

### 付与タイミング
- 3名以上の**別々のユーザー**による通報が成立した時点で即時付与する。

## 非機能要件
- ペナルティの付与・判定は一貫性を保ち、重複付与を避ける。
- 通報記録とペナルティ付与履歴は監査可能であること。

## 例外・補足
- 通報は同一マッチ内に限定される。
- ペナルティ中でも、既に開始している試合の進行には影響を与えない。
