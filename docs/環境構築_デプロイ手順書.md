# 環境構築およびデプロイ手順書

本ドキュメントでは、ローカル開発環境の立ち上げ手順および Firebase Hosting へのデプロイ手順について記載します。

## 1. ローカル開発環境の構築

### 前提条件
以下のツールがインストールされていることを前提とします。
- **Node.js**: v18 以上推奨
- **pnpm**: パッケージマネージャー
- **Firebase CLI**: `npm install -g firebase-tools` でインストール可能

### 構築手順

1. **プロジェクトのディレクトリへ移動**
   ```bash
   cd unitemate-v2
   ```

2. **依存関係のインストール**
   ```bash
   pnpm install
   ```

3. **環境変数の設定**
   `.env.example` をコピーして、ローカル用の環境変数ファイル `.env` を作成します。
   ```bash
   cp .env.example .env
   ```
   作成した `.env` ファイルを開き、Firebase コンソールから取得した設定値（API Key, Project ID など）を入力してください。

4. **開発サーバーの起動**
   以下のコマンドでローカルサーバーを起動します。
   ```bash
   pnpm dev
   ```
   起動後、ブラウザで [http://localhost:5173](http://localhost:5173) にアクセスして画面が表示されることを確認してください。

---

## 2. Firebase へのデプロイ手順

### 初回セットアップ (プロジェクト未作成の場合)

まだ Firebase 上でプロジェクトを作成していない場合の手順です。

1. **Firebase プロジェクトの作成**
   [Firebase Console](https://console.firebase.google.com/) にアクセスし、「プロジェクトを追加」から新規プロジェクトを作成してください（例: `unitemate-v2`）。

2. **CLI でのログイン**
   ターミナルで以下を実行し、Google アカウントでログインします。
   ```bash
   firebase login
   ```

3. **プロジェクトの初期化 (Hosting)**
   プロジェクトとローカル環境を紐付けます。
   ```bash
   firebase init hosting
   ```
   **設定の選択肢:**
   - **Project Setup**: `Use an existing project` を選択し、作成したプロジェクトを選びます。
   - **Public directory**: `dist` と入力します。
     - **重要**: React (Vite) のビルド出力先は `dist` です。
   - **Configure as a single-page app?**: `Yes`
     - SPA としてルーティングを正しく動作させるため必須です。
   - **Set up automatic builds and deploys with GitHub?**: `No` (任意)
   - **File dist/index.html already exists. Overwrite?**: `No`

### デプロイ実行手順 (日常の更新)

コードの変更を本番環境に反映させる際の手順です。

1. **アプリケーションのビルド**
   リリース用の静的ファイルを生成します。
   ```bash
   pnpm build
   ```
   成功すると `dist` ディレクトリ配下にファイルが生成されます。

2. **デプロイ**
   ビルドしたファイルを Firebase Hosting にアップロードします。
   ```bash
   firebase deploy
   ```
   コマンド完了後に表示される `Hosting URL` にアクセスして、本番環境での動作を確認してください。
